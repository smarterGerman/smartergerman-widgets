<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>German Article Trainer - der, die, das</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #F5F3EF;
      color: #2C2C2C;
      line-height: 1.6;
      padding: 20px;
    }

    .container {
      background: #FAFAFA;
      border-radius: 18px;
      padding: 25px;
      max-width: 700px;
      margin: 0 auto;
      box-shadow: 0 6px 25px rgba(233, 30, 99, 0.25);
      border: 3px solid #FFA8CC;
    }

    /* Header */
    .header {
      text-align: center;
      margin-bottom: 20px;
    }

    .header h1 {
      font-size: 28px;
      font-weight: 800;
      color: #E91E63;
      margin-bottom: 5px;
    }

    .header .subtitle {
      font-size: 14px;
      color: #6B4E8C;
      font-weight: 600;
    }

    .header-btns {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 12px;
    }

    .small-btn {
      background: #E91E63;
      color: white;
      border: none;
      padding: 6px 14px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .small-btn:hover {
      background: #D81B60;
      transform: translateY(-1px);
    }

    .small-btn u {
      text-decoration: underline;
    }

    /* Info Section */
    .info-section {
      background: #FFF3E0;
      padding: 12px 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 14px;
      line-height: 1.5;
    }

    .info-section strong {
      color: #E91E63;
    }

    .info-section p {
      margin-bottom: 8px;
    }

    .info-section p:last-child {
      margin-bottom: 0;
    }


    .info-section .info-title {
      margin-bottom: 4px;
      color: #E91E63;
    }

    .info-section .signals-title {
      margin-top: 16px;
      margin-bottom: 4px;
      color: #E91E63;
    }

    .info-section .der { color: #00BCD4; font-weight: 700; }
    .info-section .das { color: #FF9800; font-weight: 700; }
    .info-section .die { color: #E91E63; font-weight: 700; }

    .info-section kbd {
      background: white;
      border: 1px solid #DDD;
      border-radius: 4px;
      padding: 1px 6px;
      font-family: monospace;
      font-size: 12px;
    }

    .hidden {
      display: none !important;
    }

    /* Progress */
    .progress-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 14px;
      font-weight: 600;
    }

    .progress-current {
      color: #6B4E8C;
    }

    .progress-score {
      color: #FF9800;
    }

    .progress-bar-container {
      height: 10px;
      background: #E0E0E0;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 20px;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #00BCD4, #00ACC1);
      transition: width 0.3s ease;
      border-radius: 8px;
    }

    /* Question Area */
    .question-area {
      background: white;
      padding: 25px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08);
      margin-bottom: 20px;
      min-height: 120px;
    }

    .word-display {
      font-size: 42px;
      font-weight: 800;
      color: #E91E63;
      margin-bottom: 15px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .word-display:hover {
      transform: scale(1.03);
    }

    .ending-highlight {
      color: #9C27B0;
    }

    /* Hints */
    .hint-area {
      min-height: 40px;
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .translation {
      font-size: 16px;
      color: #00BCD4;
      font-weight: 600;
      padding: 6px 14px;
      background: #E0F7FA;
      border-radius: 10px;
      animation: fadeIn 0.3s;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Answer Buttons */
    .button-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 15px;
    }

    .choice-btn {
      background: white;
      border: 3px solid #E0E0E0;
      padding: 18px;
      border-radius: 15px;
      font-size: 24px;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .choice-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .choice-btn.der { color: #00BCD4; }
    .choice-btn.der:hover:not(:disabled) { border-color: #00BCD4; }

    .choice-btn.das { color: #FF9800; }
    .choice-btn.das:hover:not(:disabled) { border-color: #FF9800; }

    .choice-btn.die { color: #E91E63; }
    .choice-btn.die:hover:not(:disabled) { border-color: #E91E63; }

    .choice-btn:disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    .choice-btn.correct {
      background: #4CAF50;
      color: white;
      border-color: #4CAF50;
      animation: pulse 0.4s;
    }

    .choice-btn.wrong {
      background: #F44336;
      color: white;
      border-color: #F44336;
      animation: shake 0.4s;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      75% { transform: translateX(8px); }
    }

    .shortcut {
      position: absolute;
      top: 6px;
      right: 10px;
      font-size: 11px;
      font-weight: 600;
      color: #9E9E9E;
    }

    .choice-btn.correct .shortcut,
    .choice-btn.wrong .shortcut {
      color: rgba(255, 255, 255, 0.8);
    }

    /* Results */
    .results {
      text-align: center;
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .results h2 {
      font-size: 24px;
      color: #E91E63;
      margin-bottom: 15px;
    }

    .percentage {
      font-size: 56px;
      font-weight: 900;
      background: linear-gradient(135deg, #E91E63, #9C27B0);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
    }

    .result-text {
      font-size: 16px;
      color: #6B4E8C;
      margin-bottom: 20px;
      font-weight: 600;
    }

    .restart-btn {
      background: #00BCD4;
      color: white;
      border: none;
      padding: 14px 30px;
      border-radius: 20px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
    }

    .restart-btn:hover {
      background: #00ACC1;
      transform: translateY(-2px);
    }

    /* Mobile */
    @media (max-width: 500px) {
      .container {
        padding: 18px;
      }

      .header h1 {
        font-size: 22px;
      }

      .word-display {
        font-size: 32px;
      }

      .choice-btn {
        padding: 14px;
        font-size: 20px;
      }

      .percentage {
        font-size: 44px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="header-btns">
        <button class="small-btn" id="infoBtnToggle" onclick="toggleInfo()"><u>I</u>nfo</button>
        <button class="small-btn" onclick="toggleTranslation()"><u>T</u>ranslation</button>
        <button class="small-btn" onclick="showEnding()"><u>H</u>int</button>
      </div>
    </div>

    <!-- Info Section (open by default) -->
    <div class="info-section" id="infoSection">
      <p class="info-title"><strong>How it works</strong></p>
      <p>You'll see 20 random German nouns. Choose the correct article (<strong>der</strong>, <strong>das</strong>, or <strong>die</strong>) for each one. Use <kbd>A</kbd> <kbd>F</kbd> <kbd>J</kbd> keys.</p>
      <p class="signals-title"><strong>Pattern <u>S</u>ignals</strong></p>
      <p><span class="der">der</span> -ig, -ling, -or, -ismus, -er</p>
      <p><span class="das">das</span> -tum, -chen, -ma, -ment, -um, -lein, -nis</p>
      <p><span class="die">die</span> -heit, -keit, -ung, -ei, -schaft, -ion, -ie, -tät, -ik, -ur, -e</p>
    </div>

    <!-- Exercise Area -->
    <div id="exerciseArea">
      <!-- Progress -->
      <div class="progress-info">
        <span class="progress-current"><span id="currentEx">1</span>/20</span>
        <span class="progress-score">Score: <span id="score">0</span></span>
      </div>
      <div class="progress-bar-container">
        <div id="progressBar" class="progress-bar" style="width: 0%;"></div>
      </div>

      <!-- Question -->
      <div class="question-area">
        <div id="wordDisplay" class="word-display" onclick="toggleTranslation()">Tisch</div>

        <div class="hint-area">
          <span id="translationDisplay" class="translation hidden">table</span>
        </div>

      </div>

      <!-- Answer Buttons -->
      <div class="button-grid">
        <button class="choice-btn der" onclick="checkAnswer('der')">
          der<span class="shortcut">(A)</span>
        </button>
        <button class="choice-btn das" onclick="checkAnswer('das')">
          das<span class="shortcut">(F)</span>
        </button>
        <button class="choice-btn die" onclick="checkAnswer('die')">
          die<span class="shortcut">(J)</span>
        </button>
      </div>

    </div>

    <!-- Results -->
    <div id="results" class="results hidden">
      <h2>Results</h2>
      <div id="percentage" class="percentage">100%</div>
      <div class="result-text">You got <span id="resultScore">20</span> out of 20 correct!</div>
      <button class="restart-btn" onclick="startGame()">Practice Again</button>
    </div>
  </div>

  <script>
    const allExercises = [
      // DER (27 words)
      { word: "König", article: "der", ending: "-ig", translation: "king" },
      { word: "Honig", article: "der", ending: "-ig", translation: "honey" },
      { word: "Essig", article: "der", ending: "-ig", translation: "vinegar" },
      { word: "Käfig", article: "der", ending: "-ig", translation: "cage" },
      { word: "Pfennig", article: "der", ending: "-ig", translation: "penny" },
      { word: "Frühling", article: "der", ending: "-ling", translation: "spring" },
      { word: "Schmetterling", article: "der", ending: "-ling", translation: "butterfly" },
      { word: "Liebling", article: "der", ending: "-ling", translation: "darling" },
      { word: "Lehrling", article: "der", ending: "-ling", translation: "apprentice" },
      { word: "Zwilling", article: "der", ending: "-ling", translation: "twin" },
      { word: "Motor", article: "der", ending: "-or", translation: "motor" },
      { word: "Doktor", article: "der", ending: "-or", translation: "doctor" },
      { word: "Traktor", article: "der", ending: "-or", translation: "tractor" },
      { word: "Autor", article: "der", ending: "-or", translation: "author" },
      { word: "Professor", article: "der", ending: "-or", translation: "professor" },
      { word: "Realismus", article: "der", ending: "-ismus", translation: "realism" },
      { word: "Tourismus", article: "der", ending: "-ismus", translation: "tourism" },
      { word: "Optimismus", article: "der", ending: "-ismus", translation: "optimism" },
      { word: "Kapitalismus", article: "der", ending: "-ismus", translation: "capitalism" },
      { word: "Sozialismus", article: "der", ending: "-ismus", translation: "socialism" },
      { word: "Lehrer", article: "der", ending: "-er", translation: "teacher" },
      { word: "Fahrer", article: "der", ending: "-er", translation: "driver" },
      { word: "Verkäufer", article: "der", ending: "-er", translation: "salesperson" },
      { word: "Maler", article: "der", ending: "-er", translation: "painter" },
      { word: "Bäcker", article: "der", ending: "-er", translation: "baker" },
      { word: "Schüler", article: "der", ending: "-er", translation: "student" },
      { word: "Arbeiter", article: "der", ending: "-er", translation: "worker" },
      // DAS (26 words)
      { word: "Eigentum", article: "das", ending: "-tum", translation: "property" },
      { word: "Wachstum", article: "das", ending: "-tum", translation: "growth" },
      { word: "Christentum", article: "das", ending: "-tum", translation: "Christianity" },
      { word: "Mädchen", article: "das", ending: "-chen", translation: "girl" },
      { word: "Hähnchen", article: "das", ending: "-chen", translation: "chicken" },
      { word: "Kaninchen", article: "das", ending: "-chen", translation: "rabbit" },
      { word: "Brötchen", article: "das", ending: "-chen", translation: "bread roll" },
      { word: "Kätzchen", article: "das", ending: "-chen", translation: "kitten" },
      { word: "Hündchen", article: "das", ending: "-chen", translation: "puppy" },
      { word: "Drama", article: "das", ending: "-ma", translation: "drama" },
      { word: "Thema", article: "das", ending: "-ma", translation: "topic" },
      { word: "Klima", article: "das", ending: "-ma", translation: "climate" },
      { word: "Argument", article: "das", ending: "-ment", translation: "argument" },
      { word: "Dokument", article: "das", ending: "-ment", translation: "document" },
      { word: "Instrument", article: "das", ending: "-ment", translation: "instrument" },
      { word: "Experiment", article: "das", ending: "-ment", translation: "experiment" },
      { word: "Museum", article: "das", ending: "-um", translation: "museum" },
      { word: "Studium", article: "das", ending: "-um", translation: "studies" },
      { word: "Zentrum", article: "das", ending: "-um", translation: "center" },
      { word: "Datum", article: "das", ending: "-um", translation: "date" },
      { word: "Büchlein", article: "das", ending: "-lein", translation: "little book" },
      { word: "Fräulein", article: "das", ending: "-lein", translation: "Miss" },
      { word: "Geheimnis", article: "das", ending: "-nis", translation: "secret" },
      { word: "Ergebnis", article: "das", ending: "-nis", translation: "result" },
      { word: "Zeugnis", article: "das", ending: "-nis", translation: "certificate" },
      { word: "Verzeichnis", article: "das", ending: "-nis", translation: "directory" },
      // DIE (54 words)
      { word: "Freiheit", article: "die", ending: "-heit", translation: "freedom" },
      { word: "Schönheit", article: "die", ending: "-heit", translation: "beauty" },
      { word: "Krankheit", article: "die", ending: "-heit", translation: "illness" },
      { word: "Weisheit", article: "die", ending: "-heit", translation: "wisdom" },
      { word: "Gesundheit", article: "die", ending: "-heit", translation: "health" },
      { word: "Einheit", article: "die", ending: "-heit", translation: "unity" },
      { word: "Mehrheit", article: "die", ending: "-heit", translation: "majority" },
      { word: "Wahrheit", article: "die", ending: "-heit", translation: "truth" },
      { word: "Kindheit", article: "die", ending: "-heit", translation: "childhood" },
      { word: "Sicherheit", article: "die", ending: "-heit", translation: "security" },
      { word: "Hoffnung", article: "die", ending: "-ung", translation: "hope" },
      { word: "Zeitung", article: "die", ending: "-ung", translation: "newspaper" },
      { word: "Wohnung", article: "die", ending: "-ung", translation: "apartment" },
      { word: "Meinung", article: "die", ending: "-ung", translation: "opinion" },
      { word: "Rechnung", article: "die", ending: "-ung", translation: "bill" },
      { word: "Erfahrung", article: "die", ending: "-ung", translation: "experience" },
      { word: "Möglichkeit", article: "die", ending: "-keit", translation: "possibility" },
      { word: "Schwierigkeit", article: "die", ending: "-keit", translation: "difficulty" },
      { word: "Fähigkeit", article: "die", ending: "-keit", translation: "ability" },
      { word: "Geschwindigkeit", article: "die", ending: "-keit", translation: "speed" },
      { word: "Gerechtigkeit", article: "die", ending: "-keit", translation: "justice" },
      { word: "Bäckerei", article: "die", ending: "-ei", translation: "bakery" },
      { word: "Metzgerei", article: "die", ending: "-ei", translation: "butcher shop" },
      { word: "Polizei", article: "die", ending: "-ei", translation: "police" },
      { word: "Malerei", article: "die", ending: "-ei", translation: "painting" },
      { word: "Bücherei", article: "die", ending: "-ei", translation: "library" },
      { word: "Freundschaft", article: "die", ending: "-schaft", translation: "friendship" },
      { word: "Mannschaft", article: "die", ending: "-schaft", translation: "team" },
      { word: "Gesellschaft", article: "die", ending: "-schaft", translation: "society" },
      { word: "Wirtschaft", article: "die", ending: "-schaft", translation: "economy" },
      { word: "Landschaft", article: "die", ending: "-schaft", translation: "landscape" },
      { word: "Nation", article: "die", ending: "-ion", translation: "nation" },
      { word: "Information", article: "die", ending: "-ion", translation: "information" },
      { word: "Religion", article: "die", ending: "-ion", translation: "religion" },
      { word: "Situation", article: "die", ending: "-ion", translation: "situation" },
      { word: "Diskussion", article: "die", ending: "-ion", translation: "discussion" },
      { word: "Familie", article: "die", ending: "-ie", translation: "family" },
      { word: "Energie", article: "die", ending: "-ie", translation: "energy" },
      { word: "Theorie", article: "die", ending: "-ie", translation: "theory" },
      { word: "Industrie", article: "die", ending: "-ie", translation: "industry" },
      { word: "Biologie", article: "die", ending: "-ie", translation: "biology" },
      { word: "Universität", article: "die", ending: "-tät", translation: "university" },
      { word: "Qualität", article: "die", ending: "-tät", translation: "quality" },
      { word: "Realität", article: "die", ending: "-tät", translation: "reality" },
      { word: "Aktivität", article: "die", ending: "-tät", translation: "activity" },
      { word: "Musik", article: "die", ending: "-ik", translation: "music" },
      { word: "Politik", article: "die", ending: "-ik", translation: "politics" },
      { word: "Technik", article: "die", ending: "-ik", translation: "technology" },
      { word: "Natur", article: "die", ending: "-ur", translation: "nature" },
      { word: "Kultur", article: "die", ending: "-ur", translation: "culture" },
      { word: "Frisur", article: "die", ending: "-ur", translation: "hairstyle" },
      { word: "Tasse", article: "die", ending: "-e", translation: "cup" },
      { word: "Nase", article: "die", ending: "-e", translation: "nose" },
      { word: "Frage", article: "die", ending: "-e", translation: "question" },
      { word: "Liebe", article: "die", ending: "-e", translation: "love" },
      { word: "Note", article: "die", ending: "-e", translation: "grade" },
      { word: "Gage", article: "die", ending: "-e", translation: "fee" },
      { word: "Seele", article: "die", ending: "-e", translation: "soul" }
    ];

    let currentExercises = [];
    let currentIndex = 0;
    let score = 0;
    let showingTranslation = false;
    let showingEnding = false;
    let answered = false;
    let translationTimer = null;
    let endingTimer = null;

    function shuffle(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function toggleInfo() {
      const section = document.getElementById('infoSection');
      section.classList.toggle('hidden');
    }

    function startGame() {
      const shuffled = shuffle([...allExercises]);
      currentExercises = shuffled.slice(0, 20);
      currentIndex = 0;
      score = 0;

      document.getElementById('exerciseArea').classList.remove('hidden');
      document.getElementById('results').classList.add('hidden');

      showExercise();
    }

    function showExercise() {
      answered = false;
      showingTranslation = false;
      showingEnding = false;

      if (translationTimer) clearTimeout(translationTimer);
      if (endingTimer) clearTimeout(endingTimer);

      const exercise = currentExercises[currentIndex];

      document.getElementById('currentEx').textContent = currentIndex + 1;
      document.getElementById('score').textContent = score;
      document.getElementById('wordDisplay').textContent = exercise.word;
      document.getElementById('translationDisplay').classList.add('hidden');

      const progressPercent = (currentIndex / 20) * 100;
      document.getElementById('progressBar').style.width = progressPercent + '%';

      document.querySelectorAll('.choice-btn').forEach(btn => {
        btn.disabled = false;
        btn.classList.remove('correct', 'wrong');
      });
    }

    function toggleTranslation() {
      if (answered) return;

      showingTranslation = !showingTranslation;
      const translationEl = document.getElementById('translationDisplay');
      const exercise = currentExercises[currentIndex];

      if (translationTimer) clearTimeout(translationTimer);

      if (showingTranslation) {
        translationEl.textContent = exercise.translation;
        translationEl.classList.remove('hidden');

        translationTimer = setTimeout(() => {
          translationEl.classList.add('hidden');
          showingTranslation = false;
        }, 3000);
      } else {
        translationEl.classList.add('hidden');
      }
    }

    function showEnding() {
      if (answered) return;

      showingEnding = true;
      const wordEl = document.getElementById('wordDisplay');
      const exercise = currentExercises[currentIndex];
      const word = exercise.word;
      const ending = exercise.ending;

      if (endingTimer) clearTimeout(endingTimer);

      // Find where the ending starts in the word
      const endingWithoutDash = ending.replace('-', '');
      const endingIndex = word.toLowerCase().lastIndexOf(endingWithoutDash.toLowerCase());

      if (endingIndex > 0) {
        const before = word.substring(0, endingIndex);
        const highlighted = word.substring(endingIndex);
        wordEl.innerHTML = before + '<span class="ending-highlight">' + highlighted + '</span>';
      }

      endingTimer = setTimeout(() => {
        wordEl.textContent = exercise.word;
        showingEnding = false;
      }, 3000);
    }

    function checkAnswer(selectedArticle) {
      if (answered) return;

      answered = true;
      const exercise = currentExercises[currentIndex];
      const isCorrect = selectedArticle === exercise.article;

      if (translationTimer) clearTimeout(translationTimer);
      if (endingTimer) clearTimeout(endingTimer);

      document.querySelectorAll('.choice-btn').forEach(btn => btn.disabled = true);

      const buttons = document.querySelectorAll('.choice-btn');
      buttons.forEach(btn => {
        if (btn.textContent.includes(exercise.article)) {
          btn.classList.add('correct');
        } else if (btn.textContent.includes(selectedArticle) && !isCorrect) {
          btn.classList.add('wrong');
        }
      });

      if (isCorrect) {
        score++;
        document.getElementById('score').textContent = score;
      }

      setTimeout(() => {
        if (currentIndex < 19) {
          currentIndex++;
          showExercise();
        } else {
          showResults();
        }
      }, 800);
    }

    function showResults() {
      document.getElementById('exerciseArea').classList.add('hidden');
      document.getElementById('results').classList.remove('hidden');

      const percentage = Math.round((score / 20) * 100);
      document.getElementById('percentage').textContent = percentage + '%';
      document.getElementById('resultScore').textContent = score;
    }

    document.addEventListener('keydown', (e) => {
      const key = e.key.toLowerCase();

      // Global shortcuts (work anytime)
      if (key === 'i' || key === 's') { toggleInfo(); return; }
      if (key === 't') { toggleTranslation(); return; }
      if (key === 'h') { showEnding(); return; }

      // Game shortcuts (only during exercise)
      if (document.getElementById('exerciseArea').classList.contains('hidden')) return;
      if (answered) return;

      if (key === 'a') checkAnswer('der');
      else if (key === 'f') checkAnswer('das');
      else if (key === 'j') checkAnswer('die');
    });

    // Start on load
    startGame();
  </script>
</body>
</html>
